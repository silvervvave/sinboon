<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>조선 후기 신분 상승 시뮬레이션</title>
    <style>
        body { font-family:'Noto Sans KR',-apple-system,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);margin:0;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;}
        .game-container{background:white;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);max-width:900px;width:100%;overflow:hidden;}
        .header{background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);color:white;padding:30px;text-align:center;}
        .header h1{font-size:28px;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.2);}
        .header p{font-size:14px;opacity:.95;}
        .game-content{padding:30px;}
        .start-screen{text-align:center;}
        .start-screen h2{color:#333;margin-bottom:20px;font-size:24px;}
        .start-screen p{color:#666;line-height:1.8;margin-bottom:15px;}
        .story-box{background:#f8f9fa;border-left:4px solid #f5576c;padding:20px;margin:20px 0;border-radius:8px;}
        .story-box h3{color:#f5576c;margin-bottom:10px;}
        .start-button{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:15px 40px;font-size:18px;border-radius:50px;cursor:pointer;margin-top:20px;transition:transform .2s,box-shadow .2s;}
        .start-button:hover{transform:translateY(-2px);box-shadow:0 10px 20px rgba(102,126,234,0.4);}
        .status-bar{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:30px;}
        .status-item{background:linear-gradient(135deg,#a8edea 0%,#fed6e3 100%);padding:20px;border-radius:12px;text-align:center;box-shadow:0 4px 6px rgba(0,0,0,0.1);}
        .status-label{font-size:12px;color:#666;margin-bottom:5px;font-weight:600;}
        .status-value{font-size:24px;font-weight:bold;color:#333;}
        .current-status{background:#fff3cd;border:2px solid #ffc107;padding:15px;border-radius:10px;margin-bottom:20px;text-align:center;}
        .current-status strong{color:#ff6b6b;font-size:18px;}
        .activities { display: grid; grid-template-columns: repeat(auto-fit,minmax(250px,1fr)); gap: 20px; margin-bottom: 30px;}
        .activity-card{background:white;border:2px solid #e0e0e0;border-radius:12px;padding:20px;cursor:pointer;transition:all .3s;position:relative;overflow:hidden;}
        .activity-card:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,0.15);border-color:#667eea;}
        .activity-card.disabled{opacity:.5;cursor:not-allowed;}
        .activity-card.disabled:hover{transform:none;box-shadow:none;}
        .activity-icon{font-size:48px;margin-bottom:15px;}
        .activity-title{font-size:18px;font-weight:bold;color:#333;margin-bottom:10px;}
        .activity-desc{font-size:13px;color:#666;line-height:1.6;margin-bottom:15px;}
        .activity-reward{background:#e8f5e9;color:#2e7d32;padding:8px;border-radius:6px;font-size:14px;font-weight:bold;text-align:center;}
        .activity-cost{background:#ffebee;color:#c62828;padding:8px;border-radius:6px;font-size:14px;font-weight:bold;text-align:center;margin-top:8px;}
        .message-box{background:#e3f2fd;border-left:4px solid #2196f3;padding:15px;margin:20px 0;border-radius:8px;animation:slideIn .3s;}
        .message-box.success{background:#e8f5e9;border-left-color:#4caf50;}
        .message-box.warning{background:#fff3cd;border-left-color:#ffc107;}
        .message-box.error{background:#ffebee;border-left-color:#f44336;}
        @keyframes slideIn{from{opacity:0;transform:translateX(-20px);}to{opacity:1;transform:translateX(0);}}
        .end-screen{text-align:center;padding:40px 20px;}
        .end-screen h2{font-size:32px;color:#333;margin-bottom:20px;}
        .final-status{background:#f8f9fa;padding:30px;border-radius:12px;margin:20px 0;}
        .final-status h3{color:#667eea;margin-bottom:20px;}
        .final-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:20px;}
        .final-stat-item{background:white;padding:15px;border-radius:8px;border:2px solid #e0e0e0;}
        .learning-points{background:#fff3cd;padding:20px;border-radius:12px;margin:20px 0;text-align:left;}
        .learning-points h3{color:#f5576c;margin-bottom:15px;}
        .learning-points ul{list-style:none;padding-left:0;}
        .learning-points li{padding:10px 0;border-bottom:1px solid #dee2e6;line-height:1.6;}
        .learning-points li:last-child{border-bottom:none;}
        .learning-points li:before{content:"✓ ";color:#4caf50;font-weight:bold;margin-right:10px;}
        .button-group{display:flex;gap:15px;justify-content:center;margin-top:20px;}
        .secondary-button{background:#6c757d;color:white;border:none;padding:12px 30px;font-size:16px;border-radius:50px;cursor:pointer;transition:all .2s;}
        .secondary-button:hover{background:#5a6268;transform:translateY(-2px);}
        .hidden{display:none;}
        .progress-bar{background:#e0e0e0;height:20px;border-radius:10px;overflow:hidden;margin:10px 0;}
        .progress-fill{background:linear-gradient(90deg,#667eea 0%,#764ba2 100%);height:100%;transition:width .3s;display:flex;align-items:center;justify-content:center;color:white;font-size:12px;font-weight:bold;}
        .turn-counter{text-align:center;font-size:18px;color:#666;margin-bottom:20px;padding:10px;background:#f8f9fa;border-radius:8px;}
        @media(max-width:768px){.header h1{font-size:22px;}.activities{grid-template-columns:1fr;}.status-bar{grid-template-columns:1fr 1fr;}}
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>🏛️ 조선 후기 신분 상승 시뮬레이션</h1>
            <p>경제 활동을 통해 신분 상승을 체험해보세요</p>
        </div>
        <div class="game-content">
            <div id="startScreen" class="start-screen">
                <h2>게임 소개</h2>
                <div class="story-box">
                    <h3>📖 배경 이야기</h3>
                    <p>당신은 조선 후기(18세기)를 살아가는 평민입니다.<br>
                       모내기법의 확산과 상업의 발달로 경제적 기회가 늘어나고 있습니다.<br>
                       농사를 짓거나, 장사를 하거나, 광산에서 일해 돈을 모아<br>
                       <strong>양반 신분으로 상승</strong>할 수 있을까요?</p>
                </div>
                <div class="story-box">
                    <h3>🎯 게임 목표</h3>
                    <p><strong>10턴 안에 양반 신분을 획득하세요!</strong></p>
                    <p>• 다양한 경제 활동으로 돈을 모으세요<br>• 공명첩 구입, 족보 위조, 호적 변조 중 선택하세요<br>
                       • 역사적 사실에 기반한 실제 신분 상승 방법입니다</p>
                </div>
                <button class="start-button" onclick="startGame()">게임 시작하기</button>
            </div>
            <div id="gameScreen" class="hidden">
                <div class="turn-counter">
                    <span id="turnDisplay">턴: 1 / 10</span>
                </div>
                <div class="status-bar">
                    <div class="status-item">
                        <div class="status-label">보유 금액</div>
                        <div class="status-value" id="money">1000</div>
                        <small>냥</small>
                    </div>
                    <div class="status-item">
                        <div class="status-label">현재 신분</div>
                        <div class="status-value" id="status">평민</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">사회적 평판</div>
                        <div class="status-value" id="reputation">0</div>
                        <small>점</small>
                    </div>
                </div>
                <div class="current-status">
                    <strong>양반 신분까지 필요한 금액: <span id="needMoney">3000</span>냥</strong>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 25%">25%</div>
                    </div>
                </div>
                <div id="messageBox"></div>
                <h3 style="margin-bottom: 15px; color: #333;">💰 경제 활동 선택</h3>
                <div class="activities" id="economicActivities"></div>
                <h3 style="margin:30px 0 15px;color:#333;">📜 신분 상승 시도</h3>
                <div class="activities" id="statusActivities"></div>
            </div>
            <div id="endScreen" class="hidden"></div>
        </div>
    </div>
    <script>
        // 데이터 및 상태 정의
        let economicActivities = [
            {id:'rice_farming',icon:'🌾',title:'모내기법으로 농사',desc:'이모작이 가능한 모내기법으로 쌀과 보리 재배.',reward:[300,500],cost:0,rep:5},
            {id:'cash_crop',icon:'🌿',title:'상품작물 재배',desc:'인삼, 담배, 목화 등 돈이 되는 작물 재배.',reward:[400,700],cost:0,rep:10},
            {id:'market_trade',icon:'🏪',title:'장시에서 장사',desc:'5일마다 열리는 장시에서 물건을 거래.',reward:[500,800],cost:200,rep:15},
            {id:'mining',icon:'⛏️',title:'민영 광산 채굴',desc:'광산에서 금과 은 채굴.',reward:[600,1000],cost:300,rep:20},
            {id:'handicraft',icon:'🔨',title:'수공업 생산',desc:'관청 소속 장인에서 민영 수공업자 변화.',reward:[400,600],cost:100,rep:12}
        ];
        let statusUpActivities = [
            {id:'gongmyeongcheop',icon:'📜',title:'공명첩 구입',desc:'국가에서 판 공명첩을 구입해 신분 획득.',cost:3000,successRate:0.9,rep:50},
            {id:'jokbo',icon:'📖',title:'족보 위조',desc:'양반 가문의 족보를 위조해 신분 상승.',cost:2500,successRate:0.7,rep:-20},
            {id:'hojeok',icon:'📋',title:'호적 변조',desc:'호적을 변조하여 신분을 변경.',cost:2000,successRate:0.6,rep:-30}
        ];
        let gameState = {
            money:1000,turn:1,maxTurns:10,
            status:'평민',reputation:0,history:[],
            ecActCounts:{},statusActCounts:{}
        };
        // 클릭 횟수 초기화
        economicActivities.forEach(a=>gameState.ecActCounts[a.id]=0);
        statusUpActivities.forEach(a=>gameState.statusActCounts[a.id]=0);
        function startGame(){
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            renderGame();
        }
        function renderGame(){
            document.getElementById('money').textContent=gameState.money;
            document.getElementById('status').textContent=gameState.status;
            document.getElementById('reputation').textContent=gameState.reputation;
            document.getElementById('turnDisplay').textContent=`턴: ${gameState.turn} / ${gameState.maxTurns}`;
            document.getElementById('needMoney').textContent=Math.max(0,3000-gameState.money);
            let progress=Math.min(100,(gameState.money/3000)*100);
            document.getElementById('progressBar').style.width=progress+'%';
            document.getElementById('progressBar').textContent=Math.round(progress)+'%';
            // 경제 활동
            document.getElementById('economicActivities').innerHTML=
                economicActivities.map(activity=>{
                    let usedCount=gameState.ecActCounts[activity.id];
                    let canAfford=gameState.money>=activity.cost;
                    let disabled=(!canAfford||usedCount>=2)?'disabled':'';
                    return `<div class="activity-card ${disabled}" onclick="${(!canAfford||usedCount>=2)?'':`doEconomicActivity('${activity.id}')`}">
                       <div class="activity-icon">${activity.icon}</div>
                       <div class="activity-title">${activity.title}</div>
                       <div class="activity-desc">${activity.desc}</div>
                       <div class="activity-reward">💰 ${activity.reward[0]}~${activity.reward[1]}냥 획득</div>
                       ${activity.cost>0?`<div class="activity-cost">💸 비용: ${activity.cost}냥</div>`:''}
                       <div style="margin-top:8px;font-size:12px;color:#777">사용횟수: ${usedCount}/2</div>
                    </div>`;
                }).join('');
            // 신분 상승 활동
            document.getElementById('statusActivities').innerHTML=
                statusUpActivities.map(activity=>{
                    let usedCount=gameState.statusActCounts[activity.id];
                    let canAfford=gameState.money>=activity.cost;
                    let disabled=(!canAfford||usedCount>=2)?'disabled':'';
                    return `<div class="activity-card ${disabled}" onclick="${(!canAfford||usedCount>=2)?'':`tryStatusUp('${activity.id}')`}">
                        <div class="activity-icon">${activity.icon}</div>
                        <div class="activity-title">${activity.title}</div>
                        <div class="activity-desc">${activity.desc}</div>
                        <div class="activity-cost">💸 비용: ${activity.cost}냥</div>
                        <div class="activity-reward">✨ 성공률: ${activity.successRate*100}%</div>
                        <div style="margin-top:8px;font-size:12px;color:#777">사용횟수: ${usedCount}/2</div>
                    </div>`;
                }).join('');
        }
        function doEconomicActivity(activityId){
            if(gameState.ecActCounts[activityId]>=2){
                showMessage('해당 경제활동은 2회까지 가능합니다!','warning');
                return;
            }
            let activity=economicActivities.find(a=>a.id===activityId);
            if(gameState.money<activity.cost){
                showMessage('돈이 부족합니다!','error');
                return;
            }
            gameState.ecActCounts[activityId]++;
            gameState.money-=activity.cost;
            let reward=Math.floor(Math.random()*(activity.reward[1]-activity.reward[0]+1))+activity.reward[0];
            gameState.money+=reward;
            gameState.reputation+=activity.rep;
            let netProfit=reward-activity.cost;
            showMessage(`${activity.title}을(를) 했습니다! ${netProfit>0?'💰':''} ${netProfit}냥을 벌었습니다. (평판 +${activity.rep})`,'success');
            gameState.history.push({turn:gameState.turn,action:activity.title,result:`+${netProfit}냥`});
            nextTurn();
        }
        function tryStatusUp(activityId){
            if(gameState.statusActCounts[activityId]>=2){
                showMessage('해당 신분상승 방법은 2회까지 가능합니다!','warning');
                return;
            }
            let activity=statusUpActivities.find(a=>a.id===activityId);
            if(gameState.money<activity.cost){
                showMessage('돈이 부족합니다!','error');
                return;
            }
            gameState.statusActCounts[activityId]++;
            gameState.money-=activity.cost;
            let success=Math.random()<activity.successRate;
            if(success){
                gameState.status='양반';
                gameState.reputation+=activity.rep;
                showMessage(`성공! 🎉 ${activity.title}에 성공하여 양반 신분을 획득했습니다!`,'success');
                gameState.history.push({turn:gameState.turn,action:activity.title,result:'신분 상승 성공'});
                setTimeout(()=>endGame(true),2000);
            }else{
                gameState.reputation+=activity.rep;
                showMessage(`실패... 😢 ${activity.title}에 실패했습니다. 돈만 날렸습니다. (평판 ${activity.rep})`,'error');
                gameState.history.push({turn:gameState.turn,action:activity.title,result:'실패'});
                nextTurn();
            }
        }
        function nextTurn(){
            gameState.turn++;
            if(gameState.turn>gameState.maxTurns){endGame(false);}else{renderGame();}
        }
        function showMessage(text,type='info'){
            let messageBox=document.getElementById('messageBox');
            messageBox.innerHTML=`<div class="message-box ${type}">${text}</div>`;
            setTimeout(()=>{messageBox.innerHTML='';},3000);
        }
        function endGame(success){
            document.getElementById('gameScreen').classList.add('hidden');
            let endScreen=document.getElementById('endScreen');
            endScreen.classList.remove('hidden');
            let resultMessage,resultColor,resultIcon;
            if(success){resultMessage='양반 신분 획득 성공!';resultColor='#4caf50';resultIcon='🎉';}
            else{resultMessage='신분 상승 실패';resultColor='#f44336';resultIcon='😢';}
            let historyHTML=gameState.history.map(h=>`<li><strong>${h.turn}턴:</strong> ${h.action} - ${h.result}</li>`).join('');
            endScreen.innerHTML=`
                <div class="end-screen">
                    <div style="font-size:80px;margin-bottom:20px;">${resultIcon}</div>
                    <h2 style="color:${resultColor};">${resultMessage}</h2>
                    <div class="final-status">
                        <h3>📊 최종 결과</h3>
                        <div class="final-stats">
                            <div class="final-stat-item"><div class="status-label">최종 신분</div><div class="status-value">${gameState.status}</div></div>
                            <div class="final-stat-item"><div class="status-label">남은 재산</div><div class="status-value">${gameState.money}냥</div></div>
                            <div class="final-stat-item"><div class="status-label">사회적 평판</div><div class="status-value">${gameState.reputation}점</div></div>
                            <div class="final-stat-item"><div class="status-label">소요 턴</div><div class="status-value">${gameState.turn-1}턴</div></div>
                        </div>
                        <div style="background:white;padding:15px;border-radius:8px;margin-top:15px;text-align:left;">
                            <strong>📜 활동 기록:</strong>
                            <ul style="margin-top:10px;padding-left:20px;">
                                ${historyHTML}
                            </ul>
                        </div>
                    </div>
                    <div class="learning-points">
                        <h3>💡 학습 포인트</h3>
                        <ul>
                            <li><strong>경제 발전과 신분제 동요:</strong> 조선 후기에는 모내기법과 상업 발달로 돈으로 신분을 사는 일이 흔해졌습니다.</li>
                            <li><strong>다양한 신분 상승 방법:</strong> 공명첩 구입(합법), 족보·호적 위조(불법) 등 여러 방법이 실제로 사용되었습니다.</li>
                            <li><strong>농민층의 분화:</strong> 경제 발달이 모두에게 이익이 된 것은 아니며, 부농과 빈농으로 나뉘는 양극화가 발생했습니다.</li>
                            <li><strong>신분제의 한계:</strong> 양반 수가 급격히 증가하고 신분제가 형식화되면서 전통적 신분 체계가 흔들렸습니다.</li>
                            <li><strong>역사적 의미:</strong> 이러한 변화는 근대 사회로 이행하는 과정에서 나타난 중요한 사회 변동이었습니다.</li>
                        </ul>
                    </div>
                    <div class="button-group">
                        <button class="start-button" onclick="location.reload()">다시 도전하기</button>
                        <button class="secondary-button" onclick="showTeacherGuide()">교사용 가이드</button>
                    </div>
                </div>`;
        }
        function showTeacherGuide(){
            alert(`📚 교사용 활용 가이드\n\n▪️ 활용 시점: \n- 활동 2 (신분제 변동 사례 분석)에서 15분 활용\n- 『양반전』 분석 후 체험 활동으로 진행\n▪️ 활용 방법:\n1. 개별 또는 2인 1조로 게임 진행 (5~7분)\n2. 모둠/전체 결과 공유·토의\n▪️ 학습 효과:\n✓ 경제→사회 변화 인과관계 체험\n✓ 역사적 공감 능력 향상\n✓ 능동적 학습 참여 유도\n▪️ 평가 연계:\n- 게임 결과를 학습지에 기록\n- "나의 선택과 역사적 사실 비교" 활동`);
        }
        renderGame();
    </script>
</body>
</html>
